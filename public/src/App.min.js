'use strict';

angular.module('myApp',['ui.router', 'MainCtrl', 'ngAnimate', 'NavBar']) 

.config(function($stateProvider, $urlRouterProvider, $locationProvider){ 
	$urlRouterProvider.otherwise('/');   

	$stateProvider
		.state('main', { 
			url: '/',
			templateUrl: '../views/main.html',
			controller: 'MainCtrl',
			controllerAs: 'MC' 
		})  

    // GoogleBot SEO
    $locationProvider.html5Mode(true);
})

// Scroll to top on state change ==================================

.directive('scrollTopOnStateChange', function($rootScope){
  return {
    restict: 'A',
    link: function(scope, elem, attrs){
      // Scroll to top
      $rootScope.$on('$stateChangeSuccess', function() {
        document.body.scrollTop = document.documentElement.scrollTop = 0;
      })
    }
  }
})

// Animate on load
.directive('animateOnLoad', function($animate, $timeout){
  return {
    restrict: 'A',
    replace: false,
    scope: { 
      animateClass: '='
    },
    link: function(scope, elem, attrs){
      $timeout(function(){
        scope.$parent.showElem = true; // this elem already has a controller so we access the parent directive scope to show elem;
        $animate.addClass(elem, attrs.animateClass);
      });
    }
  }
})



angular.module('MainCtrl',[])
.controller('MainCtrl', function(){
	this.title  = 'my new title'; 
});      


angular.module('myApp')
.service('myService', function($http){
	return { 
	} 
});
angular.module('MainCtrl')
.directive('headerHero', function(){
	return {
		replace: true,
		templateUrl: 'views/main/header-hero.html'   
	};  
})
angular.module('MainCtrl')
.directive('poweredGoogle', function(){
	return {
		replace: true,
		templateUrl: 'views/main/powered-google.html'   
	};  
})
angular.module('MainCtrl')
.directive('quoteCarousel', function($timeout, $animate){
	return {
		replace: true,
		templateUrl: 'views/main/quote-carousel.html',
		controllerAs: 'QC',
		controller: function(){
			var QC = this;
			QC.test = "drew Peterson"
			QC.title;
			QC.subTitle;

			QC.awards = [
				{title: "Google's OnHub sets a new standard in router design.", subTitle: "if world design guide"},
				{title: "Product of the Year (2016)", subTitle: "electronic house"},
				{title: "Outstanding design quality.", subTitle: "red dot"},
				{title: "this thing blasts Wi-Fi through your home like a firehouse on an anthill.", subTitle: "yahoo! tech"},
				{title: "The best wireless networking my home as ever seen.", subTitle: "wall street journal"},
				{title: "Coverage and throughput are shockingly good.", subTitle: "the verge"}
			];
		},
		link: function(scope,elem, attrs, QC){

			var max = QC.awards.length;
			var company = $('#quote-carousel .company');
			var container = $('#quote-carousel .quote-container');

			(function myLoop (i) {
				
				$animate.addClass(container, 'show');

				if(i === max){ i = 0;}

				company.removeClass('selected');
				company[i].classList.add('selected');

				QC.title = QC.awards[i].title;
				QC.subTitle = QC.awards[i].subTitle;


				$timeout(function () {   
					$(container).removeClass('show');
					if (++i) myLoop(i);   
				}, 4000)
			})(0); 


		

		}
	}
})
angular.module('NavBar',['ngAnimate'])
.directive('navigationBar', function($animate){
	return {
		replace: true, 
		templateUrl: 'views/navigation/navigation.html', 
		controllerAs: 'navCtrl',
		controller: function($scope){
			var ctrl = this;
			ctrl.opened;

			ctrl.toggle = function(){
				ctrl.opened = !ctrl.opened;
			}

			ctrl.close = function(){
				console.log('click close')
			}
		},
		link: function(scope, elem, attrs){
			var mobile = elem.find('.mobile');
			var navBar = $('#navBar');
			var overlay = $('#mask-overlay');

			scope.$watch('navCtrl.opened', function(newVal, oldVal){
				if(newVal){
					$animate.addClass(mobile, 'show');
					navBar.addClass('opened');
					overlay.addClass('opened');
				}else {
					$animate.removeClass(mobile, 'show');
					overlay.removeClass('opened');
					navBar.removeClass('opened');
				}
			},true)

			// body scroll
			$(window).on('scroll', function(){
				navBar.addClass('white');
				if(window.scrollY === 0){
					navBar.removeClass('white');
				}
			})
		}
	};   
});
//# sourceMappingURL=App.min.js.map
